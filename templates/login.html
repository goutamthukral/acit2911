<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
    <link rel="stylesheet" href="../static/css/styles.css">
    <title>Login</title>
</head>
<body class="login-main"> 

    <script>
        function forgot_password_flash() {
          let id = prompt("Please enter your ID", "");
          if (id == "") {
            empty_flash();
          }
          else {
              email_sent_flash();
          }
        }

        function email_sent_flash() {
            alert("Password will be sent to your mail if you have an account.")
        }

        function empty_flash() {
            alert("You did not enter any ID.")
        }
    </script>

    {% if id_exists=="not approved" %}
    <script>
        window.onload = function flash_message(){
            alert("Account not approved by Administrator yet.")
        }
    </script>
    {% endif %}

    {% if id_exists=="exists" %}
    <script>
        window.onload = function flash_message(){
            alert("Account created. Please login.")
        }
    </script>
    {% endif %}

    {% if id_exists=="no"%}
    <script>
        window.onload = function flash_message(){
            alert("ID doesn't exists. Please sign up.")
        }
    </script>
    {% endif %}

    {% if id_exists=="yes" %}
    <script>
        window.onload = function flash_message(){
            alert("Password wrong! Please retry.")
        }
    </script>
    {% endif %}

    <div class="loginBox"> 
        <img class="user" src="../static\css\login-icon.png" height="120px" width="120px">
        <form action="login-try" method="post" class="login-form">
            <h3>Study Room Booking Login</h3>
            <div class="inputBox"> 
                <label for="stuID">Student ID</label>
                <input id="stuID" type="text" name="Username" placeholder="A0" required>
                <p>Error message</p> 
            </div> 

            <div class="inputBox">
                <label for="password">Password</label>
                <input id="password" type="password" name="Password" placeholder="Password" required> 
                <p>Error message</p>
            </div>

            <input type="submit" name="signup" value="Login">
        </form>  
        <form action="login-try" method="post" class="login-form">
            <input type="submit" name="signup" value="Sign Up">
            <div class="forgotpw">
                <a class="login-a" onclick=forgot_password_flash()> Forgot Password </a>
            </div>
        </form>
         
    </div>
    <script>
        // const form = document.querySelector('.login-form');
        // const studentIdInput = document.getElementById('stuID');
        // const passwordInput = document.getElementById('password');


        // function validatePassword(){
        // if(password.value != confirm_password.value) {
        //     confirm_password.setCustomValidity("Passwords Don't Match");
        // } else {
        //     confirm_password.setCustomValidity('');
        // }
        // }
        // password.onchange = validatePassword;
        // confirm_password.onkeyup = validatePassword;

    //     form.addEventListener('submit', (event) => {
    //         validateForm();
    //         console.log(isFormValid())
    //         if (isFormValid()==true) {
    //             form.submit();
    //         }else {
    //             event.preventDefault();
    //         }
    //     });

    //     function isFormValid(){
    //         const inputContainers = form.querySelectorAll('.inputBox');
    //         let result = true;
    //         inputContainers.forEach((container)=>{
    //             if(container.classList.contains('error')){
    //                 result = false;
    //             }
    //         });
    //         return result;
    //     }

    //     function validateForm() {
    //         //student id
    //         if (studentIdInput.value.trim()=='') {
    //             setError(studentIdInput, 'Student ID is required')
    //         }else if(studentIdInput.value.trim().length < 9 || studentIdInput.value.trim().length > 9){
    //             setError(studentIdInput, 'Student ID must be 9 charecters');
    //         }else {
    //             setSuccess(studentIdInput);
    //         }
    //         //password
    //         if(passwordInput.value.trim()=='') {
    //             setError(passwordInput, 'Password is required');
    //         }else if(passwordInput.value.trim().length <8 || passwordInput.value.trim().length >20){
    //             setError(passwordInput, 'Password must be at least 8 characters')
    //         }else {
    //             setSuccess(passwordInput)
    //         }
    //     }

    //     function setError(element, errorMessage) {
    //         const parent = element.parentElement; 
    //         if(parent.classList.contains('success')) {
    //             parent.classList.remove('success');
    //         }
    //         parent.classList.add('error')
    //         const paragraph = parent.querySelector('p');
    //         paragraph.textContent = errorMessage;
    //     }

    //     function setSuccess(element) {
    //         const parent = element.parentElement;
    //         if(parent.classList.contains('error')) {
    //             parent.classList.remove('error')
    //         }
    //         parent.classList.add('success')
    //     }
    // 

    </script>
</body>
</html>